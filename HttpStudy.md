# HTTP学习记录

参考书籍:《图解HTTP》

------

## 1. Web与网络基础

### 1.1 概念

- URL
- 文件资源
- 客户端
- 超文本传输协议HTTP:作为规范，完成从客户端到服务段等一系列运作流程

### 1.2 TCP/IP

TCP/IP协议族，通信双方约定好的通信规则就叫协议

TCP/IP指互联网相关的各类协议族的总称

分层管理，4层：应用层、传输层、网络层、数据链路层

解释各层：

- 应用层

  决定了向用户提供应用服务时通信的活动，如FTP、DNS、HTTP

- 传输层

  对上层应用层提供处于网络连接中的两台计算机之间的数据传输。有两个性质不同的协议：TCP和UDP

- 网络层

  处理在网络上流动的数据包。数据包是传输的最小单位。该层规定了通过怎样的路径到达对方计算机，并把数据包传送给对方。

- 链路层

  用来处理连接网络的硬件部分。包括控制操作系统、硬件的设备驱动、网卡、光纤等物理可见部分。

通信传输流

![image-20221230092008952](./assets/image-20221230092008952.png)

利用TCP/IP协议族进行网络通信时，会通过分层顺序与对方进行通信。发送端从应用层往下走，接收端则往应用层往上走。以HTTP举例说明：首先作为发送端的客户端在应用层发出一个想看某个Web页面的HTTP请求。接着，为了传输方便，传输层把从应用层接收到的数据进行分割，并在各个报文上打上标记序号及端口号后转发给网络层。在网络层，增加作为通信目的地的MAC地址后转发给链路层。接收端的服务器在链路层接收到数据，按序往上层发送，一直到应用层。当传输到应用层，才能算真正接收到由客户端发送过来的HTTP请求。

![image-20221230093038519](./assets/image-20221230093038519.png)

封装：发送端在层与层之间传输数据时，每经过一层必定会被打赏一个该层所属的首部信息，反之接收端会将对应的首部消去，这种把数据信息包装起来的做法称为封装

### 1.3 IP、TCP和DNS

#### 1.3.1 负责传输的IP协议

IP网际协议位于网络层。其作用是把各种数据包发送给对方，而要满足保证确实传送到对方，则需要满足各类条件，最重要的是IP地址和MAC地址。

IP地址指明了节点被分配到的地址，MAC地址是指网卡所属的固定地址。IP地址和MAC地址可以进行配对。IP可变换，MAC基本上不会变。

使用ARP协议凭借MAC地址进行通信，IP间的通信依赖MAC地址，在网络上，通信双方处在同一局域网的情况很少，通常是经过多台计算机和网络设备中转才能连接到对方。进行中转时，会利用下一站中转设备的MAC地址来搜索下一个中转目标。这时会采用ARP协议，它可以通过IP地址反查出对应的MAC地址。

中转机制成为路由选择。

![image-20221230095502216](./assets/image-20221230095502216.png)

#### 1.3.2 确保可靠性的TCP协议

TCP位于传输层，提供可靠的字节流服务。

字节流服务：为了方便传输，将大块数据分割成以报文段为单位的数据包进行管理。

可靠的传输服务：能够将数据准确可靠地传输给对方。

为了准确无误地将数据送达目标处，TCP协议采用了三次握手策略。用TCP协议将数据包发送出去后，TCP会向对方确认是否成功送达。

握手过程使用了TCP的标志：SYN和ACK

![image-20221230101742576](./assets/image-20221230101742576.png)

#### 1.3.3 负责域名解析的DNS服务

DNS服务位于应用层。提供域名到IP地址之间的解析服务。

![image-20221230101841834](./assets/image-20221230101841834.png)

### 1.4 各种协议和HTTP协议的关系

![image-20221230101922198](./assets/image-20221230101922198.png)

### 1.5 URI和URL

URI：统一资源标识符Uniform Resource Identifier

- Uniform：规定统一的格式可方便处理多种不同类型的资源，而不用根据上下文环境来识别资源的访问方式。
- Resource：资源的定义是“可标识的任何东西”
- Identifier：表示可标识的对象。也称标识符

URI就是由某个协议方案表示的资源的定位标识符。协议方案是指访问资源所使用的协议类型名称

举例几种URI：

![image-20221230103159497](./assets/image-20221230103159497.png)

URL：统一资源定位符

#### 1.5.1 URI的格式

表示指定的 URI，要使用涵盖全部必要信息的绝对 URI、绝对 URL 以及相对 URL。

相对URL：从浏览器中基本URI处指定的URL，如/image/login.gif

绝对URI的格式：

![image-20221230103526519](./assets/image-20221230103526519.png)

- 使用http:或https:等协议方案名获取访问资源时要指定协议类型，不区分字母大小写，最后附一个冒号。也可使用data:或javascript:这类指定数据或脚本程序的方案名
- 登录信息：指定用户名和密码作为从服务器段获取资源时必要的登录信息。可选项
- 服务器地址：使用绝对URI必须指定待访问的服务器地址。可以是DNS可解析的名臣，也可以是IP地址
- 服务器端口号：指定服务器连接的网络端口号。可选项，省略时使用默认端口号。
- 带层次的文件路径：指定服务器上的文件路径来定位特指的资源。
- 查询字符串：针对已指定的文件路径内的资源，可以使用查询字符串传入任意参数。可选项
- 片段标识符：通常可标记出已获取资源中的子资源(文档内的某个位置)。可选项

## 2. 简单的HTTP协议

## 3. HTTP报文内的HTTP信息

## 4. 返回结果的HTTP状态码

## 5. 与HTTP协作的Web服务器

## 6. HTTP首部

## 7. 确保Web安全的HTTPS

## 8. 确认访问用户身份的认证

## 9. 基于HTTP的功能追加协议

## 10. 构建Web内容的技术

## 11. Web的攻击技术